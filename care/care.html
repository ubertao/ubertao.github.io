<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>护理沟通</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .main {
            width: 90%;
            margin: 2em auto;
            font-size: 1.5em;            
        }
        #menu button {
            font-size: 1.2em;
        }
        #image-item {
            width: 100%;
        }
        #nav-list li {
            color: #007bff;
            text-decoration: underline;
        }
        #nav-list li.active {
            color: #000;
            text-decoration: none;
        }
        .expand-ind {
            float: right;
        }
        .expand-ind::after {
            content: '▸';
        }
        .picture-ind {
            float: right;
        }
        .picture-ind::after {
            content: '🖼️';
        }

    </style>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.slim.js"></script>
    <script>
        var bodyParts = {
            '头颈': '#head.jpg',
            '躯干': '#body.jpg',
            '四肢': '#limb.jpg',
        };
        var menu = {
            '方便!': { '大便': null, '小便': null },
            '疼痛!': {
                '皮肤痛': bodyParts,
                '肌肉痛': bodyParts,
                '胸腔/腹腔痛': bodyParts,
                '头痛/牙痛/神经痛': bodyParts,
                '关节痛': bodyParts
            },
            '不适!': {
                '冷': null,
                '热': null,
                '瘙痒': bodyParts,
                '麻木': bodyParts,
                '恶心': null,
                '有痰': null
            },
            '姿态': {
                '仰卧': null,
                '俯卧': null,
                '左侧卧': null,
                '右侧卧': null,
                '半坐': null,
                '坐直': null,
                '局部调整': {
                    '头部升高': null,
                    '头部降低': null,
                    '躯干升高': null,
                    '躯干降低': null,
                    '腰部垫高': null,
                    '腰部降低': null,
                    '腿部升高': null,
                    '腿部降低': null
                }
            },
            '起居': { '洗漱': null, '擦洗': bodyParts, '睡眠': null, '吃药': null },
            '饮食': {
                '饮料': { '水': null, '茶': null, '牛奶': null, '果汁': null },
                '水果': { '苹果': null, '香蕉': null, '葡萄': null },
                '主食': { '米饭': null, '面条': null, '馒头': null, '饺子': null },
                '肉类': { '鸡肉': null, '鸭肉': null, '鱼肉': null, '牛肉': null, '羊肉': null, '猪肉': null },
                '蔬菜': { '青菜': null, '萝卜': null, '土豆': null },
                '零食': { '饼干': null, '糖果': null, '巧克力': null }
            },
            '询问': {
                '家人': { '老伴': null, '子女': null, '孙子女': null },
                '医护': { '医生': null, '护士': null, '护工': null },
                '日期/星期': null,
                '时间': null,
                '天气': null,
                '病情': null,
                '其他': null
            },
            '娱乐': { '手机': null, '电脑': null, '电视': null, '音乐': null, '阅读': null, '聊天': null, '散步': null },
        };
        function navigate(menuName, menuItems) {
            // populate #menu div with multi level menu items, 
            // and bind click event to each item to navigate to next level menu
            // if menu item is a leaf, then navigate to the corresponding page

            var menu = $('#menu');
            menu.empty();
            for (var key in menuItems) {
                var isLeaf = menuItems[key] == null;
                var isImg =  typeof menuItems[key] === 'string' && menuItems[key].startsWith('#');
                var indicatorClass = isLeaf ? '' : isImg ? 'picture-ind' : 'expand-ind';
                var buttonClass = isLeaf || isImg ? 'btn btn-outline-primary' 
                                : key.endsWith('!') ? 'btn btn-danger' : 'btn btn-primary';
                var item = $(`<button data-menu="${key}" class="${buttonClass}">${key}<span class="${indicatorClass}"/></button>`);
                console.log(key, menuItems[key]);
                if (isImg) {
                    imgSrc = menuItems[key].substring(1);
                    item.click(() => showBodyPartsImage(imgSrc));
                }
                else if (!isLeaf) {
                    item.click(function() {
                        var text = $(this).attr('data-menu');
                        var nextMenu = menuItems[text];

                        appendNavList(text, nextMenu);                    
                        // navigate to next level menu
                        navigate(text, nextMenu);
                    });
                }
                menu.append(item); 
            }

        }
        function appendNavList(text, nextMenu) {
            var navList = $('#nav-list');
            // clear active status of all items
            navList.children().removeClass('active');
            navList.children().attr('aria-current', '');

            var item = $(`<li class="breadcrumb-item active" aria-current="page">${text}</li>`);
            item.click(function() {
                // clear all items after this item
                $(this).nextAll().remove();
                // make this item active
                $(this).addClass('active');
                $(this).attr('aria-current', 'page');
                // hide body parts image
                showBodyPartsImage(null);
                // navigate to next level menu
                navigate(text, nextMenu);
            });
            navList.append(item);
        }
        function showBodyPartsImage(src) {
            // show body parts image with src
            // if src is null or empty, then hide the image
            if (src == null || src == '') {
                $('#body-parts').hide();
            }
            else {
                $('#body-parts').attr('src', src);
                $('#body-parts').show();
            }
        }

</script>
</head>
<body onload="navigate(null, menu); appendNavList('总目录', menu)">
    <div class="main container-fluid">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col ">
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                    <ol id="nav-list" class="breadcrumb">
                        <!--
                        <li class="breadcrumb-item active" aria-current="page" onclick="navigate('总目录', menu)">总目录</li>
                        -->
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <div id="menu" class="main d-grid gap-2">

    </div>
    <div class="main container-fluid">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col"><img id="body-parts" src=""/></div>
        </div>
    </div>

</body>
</html>