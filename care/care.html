<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ¤ç†æ²Ÿé€š</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .main {
            width: 90%;
            margin: 2em auto;
            font-size: 1.5em;            
        }
        #menu button {
            font-size: 1.5em;
            width: 45%;
            margin: 2% 2%;
        }
        #body-parts {
            width: 100%;
        }
        #nav-list li {
            color: #007bff;
            text-decoration: underline;
        }
        #nav-list li.active {
            color: #000;
            text-decoration: none;
        }
        .expand-ind {
            float: right;
        }
        .expand-ind::after {
            content: 'â–¸';
        }
        .picture-ind {
            float: right;
        }
        .picture-ind::after {
            content: 'ğŸ–¼ï¸';
        }
        /*
        #body-part-modal .modal-content {
            width: 100%;
            height: 100%;
        }
        */

    </style>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.slim.js"></script>
    <script>
        var bodyParts = {
            'å¤´é¢ˆ': '#head.jpg',
            'èº¯å¹²': '#body.jpg',
            'å››è‚¢': '#limb.jpg',
        };
        var menu = {
            'æ–¹ä¾¿!': { 'å¤§ä¾¿': null, 'å°ä¾¿': null },
            'ç–¼ç—›!': {
                'çš®è‚¤ç—›': {
                    'å¤´é¢ˆ': '#amblyopia',
                    'èº¯å¹²': '#male_skin_04',
                    'å››è‚¢': '#male_skin_04'
                },
                'è‚Œè‚‰ç—›': {
                    'å¤´é¢ˆ': '#male_region_head_neck_18',
                    'å‰èƒ¸': '#male_region_thorax_18',
                    'åèƒŒ': '#male_region_back_18',
                    'ä¸Šè‚¢': '#male_region_upper_limb_18',
                    'ä¸‹è‚¢': '#male_region_lower_limb_18'
                },
                'èƒ¸ç—›': '#male_region_thorax_18',
                'è…¹ç—›': '#male_region_abdomen_18',
                'å…³èŠ‚ç—›': {
                    'å¤´é¢ˆ': '#male_system_skeletal_18',
                    'èº¯å¹²': '#male_system_skeletal_18',
                    'ä¸Šè‚¢': '#male_system_skeletal_18',
                    'ä¸‹è‚¢': '#male_system_skeletal_18'
                },
                'å¤´ç—›': '#male_region_head_neck_18',
                'ç‰™ç—›': '#gum_disease_gingivitis',
                'ç¥ç»ç—›': '#male_system_nervous_18'
            },
            'ä¸é€‚!': {
                'å†·': null,
                'çƒ­': null,
                'ç˜™ç—’': {
                    'å¤´é¢ˆ': '#amblyopia',
                    'èº¯å¹²': '#male_skin_04',
                    'å››è‚¢': '#male_skin_04'
                },
                'éº»æœ¨': {
                    'å¤´é¢ˆ': '#male_region_head_neck_18',
                    'å‰èƒ¸': '#male_region_thorax_18',
                    'åèƒŒ': '#male_region_back_18',
                    'ä¸Šè‚¢': '#male_region_upper_limb_18',
                    'ä¸‹è‚¢': '#male_region_lower_limb_18'
                },
                'æ¶å¿ƒ': null,
                'æœ‰ç—°': null
            },
            'å§¿æ€': {
                'ä»°å§': null,
                'ä¿¯å§': null,
                'å·¦ä¾§å§': null,
                'å³ä¾§å§': null,
                'åŠå': null,
                'åç›´': null,
                'è°ƒæ•´': {
                    'å¤´éƒ¨ğŸ”¼': null,
                    'å¤´éƒ¨ğŸ”½': null,
                    'èº¯å¹²ğŸ”¼': null,
                    'èº¯å¹²ğŸ”½': null,
                    'è…°éƒ¨ğŸ”¼': null,
                    'è…°éƒ¨ğŸ”½': null,
                    'è…¿éƒ¨ğŸ”¼': null,
                    'è…¿éƒ¨ğŸ”½': null
                }
            },
            'èµ·å±…': { 'æ´—æ¼±': null, 'æ“¦æ´—': bodyParts, 'ç¡çœ ': null, 'åƒè¯': null },
            'é¥®é£Ÿ': {
                'é¥®æ–™': { 'æ°´': null, 'èŒ¶': null, 'ç‰›å¥¶': null, 'æœæ±': null },
                'æ°´æœ': { 'è‹¹æœ': null, 'é¦™è•‰': null, 'è‘¡è„': null },
                'ä¸»é£Ÿ': { 'ç±³é¥­': null, 'é¢æ¡': null, 'é¦’å¤´': null, 'é¥ºå­': null },
                'è‚‰ç±»': { 'é¸¡è‚‰': null, 'é¸­è‚‰': null, 'é±¼è‚‰': null, 'ç‰›è‚‰': null, 'ç¾Šè‚‰': null, 'çŒªè‚‰': null },
                'è”¬èœ': { 'é’èœ': null, 'èåœ': null, 'åœŸè±†': null },
                'é›¶é£Ÿ': { 'é¥¼å¹²': null, 'ç³–æœ': null, 'å·§å…‹åŠ›': null }
            },
            'è¯¢é—®': {
                'å®¶äºº': { 'è€ä¼´': null, 'å­å¥³': null, 'å­™å­å¥³': null },
                'åŒ»æŠ¤': { 'åŒ»ç”Ÿ': null, 'æŠ¤å£«': null, 'æŠ¤å·¥': null },
                'æ—¥æœŸ': null,
                'æ—¶é—´': null,
                'å¤©æ°”': null,
                'ç—…æƒ…': null,
                'å…¶ä»–': null
            },
            'å¨±ä¹': { 'æ‰‹æœº': null, 'ç”µè„‘': null, 'ç”µè§†': null, 'éŸ³ä¹': null, 'é˜…è¯»': null, 'èŠå¤©': null, 'æ•£æ­¥': null },
        };
        function navigate(menuName, menuItems) {
            // populate #menu div with multi level menu items, 
            // and bind click event to each item to navigate to next level menu
            // if menu item is a leaf, then navigate to the corresponding page

            var menu = $('#menu');
            menu.empty();
            for (var key in menuItems) {
                var isLeaf = menuItems[key] == null;
                var isBodyPart =  typeof menuItems[key] === 'string' && menuItems[key].startsWith('#');
                var indicatorClass = isLeaf ? '' : isBodyPart ? 'picture-ind' : 'expand-ind';
                var buttonClass = isLeaf || isBodyPart ? 'btn-outline-primary' 
                                : key.endsWith('!') ? 'btn-danger' : 'btn-primary';
                var bodyPart = isBodyPart ? menuItems[key].substring(1) : '';
                var item = $(`<button data-menu="${key}" data-body-part="${bodyPart}" class="col-6 btn ${buttonClass}">${key}<span class="${indicatorClass}"/></button>`);
                console.log(key, menuItems[key]);

                item.click(function() {
                    var text = $(this).attr('data-menu');
                    var nextMenu = menuItems[text];
                    // show/hide body parts image
                    updateBodyPart($(this));

                    if (menuItems[text] != null && typeof menuItems[text] === 'object') {
                        appendNavList(text, nextMenu);
                        // navigate to next level menu
                        navigate(text, nextMenu);
                    }
                });
                menu.append(item); 
            }

        }
        function appendNavList(text, nextMenu) {
            var navList = $('#nav-list');
            // clear active status of all items
            navList.children().removeClass('active');
            navList.children().attr('aria-current', '');

            var item = $(`<li class="breadcrumb-item active" aria-current="page">${text}</li>`);
            item.click(function() {
                // clear all items after this item
                $(this).nextAll().remove();
                // make this item active
                $(this).addClass('active');
                $(this).attr('aria-current', 'page');
                // navigate to next level menu
                navigate(text, nextMenu);
            });
            navList.append(item);
        }
        var bodyPartModal;
        function updateBodyPart(button) {
            var baseUrl = 'https://human.biodigital.com/widget';
            var devKey = '3a8393dc4c2976398b506f6835512fbefaa9a46e';
            // show body parts image with src
            // if src is null or empty, then hide the image
            var model = button.attr('data-body-part');
            console.log('model=', model);
            var src = !!model ? `${baseUrl}/?m=${model}&dk=${devKey}` : '';
            $('#body-parts').attr('src', src);
            if (!!src) {
                bodyPartModal = new bootstrap.Modal('#body-part-modal');
                bodyPartModal.show();
            }
            else if (!!bodyPartModal) {
                bodyPartModal.dispose();
            }
        }

</script>
</head>
<body onload="navigate(null, menu); appendNavList('æ€»ç›®å½•', menu)">
    <div class="main container-fluid">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col ">
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                    <ol id="nav-list" class="breadcrumb">
                        <!--
                        <li class="breadcrumb-item active" aria-current="page" onclick="navigate('æ€»ç›®å½•', menu)">æ€»ç›®å½•</li>
                        -->
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <div id="menu" class="main">

    </div>
    <div id="body-part-modal" class="modal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">é€‰æ‹©éƒ¨ä½</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="å…³é—­"></button>
                </div>
                <div class="modal-body">
                    <iframe id="body-parts" width="100%" height="100%"
                    src="https://human.biodigital.com/widget/?m=amblyopia&dk=3a8393dc4c2976398b506f6835512fbefaa9a46e">
                    </iframe>
                </div>
            </div>
        </div>
      </div>    

    <script src="https://developer.biodigital.com/builds/api/2/human-api.min.js"></script>

</body>
</html>