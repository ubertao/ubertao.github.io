<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>护理沟通</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .main {
            width: 90%;
            margin: 2em auto;
            font-size: 1.5em;            
        }
        .main button {
            font-size: 1.2em;
        }
        #menu .row {
            margin: 0.5em auto;
        }
        #menu button {
            width: 100%;
        }
        #image-item {
            width: 100%;
        }
        #nav-list li {
            color: #007bff;
            text-decoration: underline;
        }
        #nav-list li.active {
            color: #000;
            text-decoration: none;
        }
    </style>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.slim.js"></script>
    <script>
        var bodyParts = {
            '头部': '#head.jpg',
            '躯干': '#body.jpg',
            '四肢': '#limb.jpg',
        };
        var menu = {
            '询问': {
                '日期/星期': null,
                '时间': null,
                '天气': null,
                '病情': null,
                '家人': { '老伴': null, '子女': null, '孙子女': null }
            },
            '不适': {
                '冷': null,
                '热': null,
                '瘙痒': bodyParts,
                '麻木': bodyParts
            },
            '疼痛': bodyParts,
            '姿态': {
                '仰卧': null,
                '俯卧': null,
                '左侧卧': null,
                '右侧卧': null,
                '半坐': null,
                '坐直': null,
                '局部调整': {
                    '头部升高': null,
                    '头部降低': null,
                    '躯干升高': null,
                    '躯干降低': null,
                    '腰部垫高': null,
                    '腰部降低': null,
                    '腿部升高': null,
                    '腿部降低': null
                }
            },
            '起居': { '洗漱': null, '擦洗': bodyParts, '睡眠': null, '吃药': null },
            '排泄': { '大便': null, '小便': null, '呕吐': null, '吸痰': null},
            '饮食': {
                '饮料': { '水': null, '茶': null, '牛奶': null, '果汁': null },
                '水果': { '苹果': null, '香蕉': null, '葡萄': null },
                '主食': { '米饭': null, '面条': null, '馒头': null, '饺子': null },
                '肉类': { '鸡肉': null, '鸭肉': null, '鱼肉': null, '牛肉': null, '羊肉': null, '猪肉': null },
                '蔬菜': { '青菜': null, '萝卜': null, '土豆': null },
                '零食': { '饼干': null, '糖果': null, '巧克力': null }
            },
            '联系': {
                '家人': { '老伴': null, '子女': null, '孙子女': null },
                '医护': { '医生': null, '护士': null, '护工': null }
            },
            '娱乐': { '手机': null, '电脑': null, '电视': null, '音乐': null, '阅读': null, '聊天': null, '散步': null },
        };
        function navigate(menuName, menuItems) {
            // populate #menu div with multi level menu items, 
            // and bind click event to each item to navigate to next level menu
            // if menu item is a leaf, then navigate to the corresponding page

            var menu = $('#menu');
            menu.empty();
            for (var key in menuItems) {
                var isLeaf = menuItems[key] == null || typeof menuItems[key] === 'string';
                var isImg =  typeof menuItems[key] === 'string' && menuItems[key].startsWith('#');
                var buttonStyle = isLeaf ? 'btn-light': 'btn-primary';
                var item = $(`<div class="row justify-content-center align-items-center g-2"><div class="col"><button class="btn ${buttonStyle}">${key}</button></div></div>`);
                console.log(key, menuItems[key]);
                item.click(function() {
                    var text = $(this).text();
                    var nextMenu = menuItems[text];
                    if (isLeaf) {
                        // navigate to page
                        if (isImg) {
                            console.log('image src=', menuItems[text].substring(1));
                            $('#image-item').attr('src', menuItems[text].substring(1));
                        }
                    } else {
                        appendNavList(text, nextMenu);                    
                        // navigate to next level menu
                        navigate(text, nextMenu);
                    }
                });
                menu.append(item);
            }

        }
        function appendNavList(text, nextMenu) {
            var navList = $('#nav-list');
            // clear active status of all items
            navList.children().removeClass('active');
            navList.children().attr('aria-current', '');

            var item = $(`<li class="breadcrumb-item active" aria-current="page">${text}</li>`);
            item.click(function() {
                // clear all items after this item
                $(this).nextAll().remove();
                // make this item active
                $(this).addClass('active');
                $(this).attr('aria-current', 'page');
                // clear image src
                $('#image-item').attr('src', '');
                // navigate to next level menu
                navigate(text, nextMenu);
            });
            navList.append(item);
        }

</script>
</head>
<body onload="navigate(null, menu); appendNavList('总目录', menu)">
    <div class="main container-fluid">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col ">
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                    <ol id="nav-list" class="breadcrumb">
                        <!--
                        <li class="breadcrumb-item active" aria-current="page" onclick="navigate('总目录', menu)">总目录</li>
                        -->
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <div id="menu" class="main container-fluid">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col">menu item</div>
        </div>
    </div>
    <div id="menu" class="main container-fluid">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col"><img id="image-item" src=""/></div>
        </div>
    </div>

</body>
</html>